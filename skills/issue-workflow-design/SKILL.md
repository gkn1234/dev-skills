---
name: issue-workflow-design
description: å½“ç”¨æˆ·å®Œæˆ brainstorming è®¾è®¡ã€ä»ç”¨æˆ·æ•…äº‹æˆ–é—®é¢˜ç»§ç»­æµç¨‹ã€æˆ–æ˜ç¡®æåˆ°"æ·»åŠ è®¾è®¡"/"design"æ—¶ä½¿ç”¨
---

# æ·»åŠ è®¾è®¡

## Overview

ä¸º User Story æˆ– Problem æ·»åŠ è®¾è®¡å†…å®¹ï¼Œæ”¯æŒä¸¤ç§æ¨¡å¼ï¼šç®€å•åŠŸèƒ½ç›´æ¥å†™æ¦‚è¿°ï¼Œå¤æ‚åŠŸèƒ½é“¾æ¥è®¾è®¡æ–‡æ¡£ã€‚ä¸åˆ›å»ºå•ç‹¬çš„ Design Issueã€‚

## å¥½çš„è®¾è®¡æ ‡å‡†

| åŸåˆ™ | å«ä¹‰ | æ£€æŸ¥ç‚¹ |
|------|------|--------|
| **æœ‰æ˜ç¡®ç›®æ ‡** | è§£å†³ä»€ä¹ˆé—®é¢˜ | è®¾è®¡ç›®æ ‡æ¸…æ™° |
| **æœ‰æŠ€æœ¯æ–¹æ¡ˆ** | å¦‚ä½•å®ç° | æ¶æ„/æ•°æ®æµ/æ¥å£å·²å®šä¹‰ |
| **æœ‰å–èˆè¯´æ˜** | ä¸ºä»€ä¹ˆè¿™æ ·é€‰ | å¤‡é€‰æ–¹æ¡ˆå’Œå–èˆå·²è®°å½• |
| **å¯æ‹†åˆ†ä»»åŠ¡** | èƒ½åˆ†è§£å®ç° | å¯è¯†åˆ«å‡ºç‹¬ç«‹çš„å®ç°ä»»åŠ¡ |

## æµç¨‹

### 1. æ£€æµ‹ä»“åº“
- è‡ªåŠ¨æ£€æµ‹ `git remote`
- å¤±è´¥åˆ™è¯¢é—®ç”¨æˆ·

### 2. ç¡®å®šç›®æ ‡ Issue
- å¯¹è¯ä¸Šä¸‹æ–‡ä¸­æœ‰ User Story æˆ– Problemï¼šç›´æ¥ä½¿ç”¨
- å‚æ•°æŒ‡å®šï¼š`--user-story N` æˆ– `--problem N`
- å¦åˆ™ï¼šåˆ—å‡º User Story å’Œ Problem ä¾›é€‰æ‹©

### 3. åˆ¤æ–­å¤æ‚åº¦

Claude æ ¹æ®åŠŸèƒ½ç‰¹ç‚¹æ¨æ–­å¤æ‚åº¦ï¼Œå‘ç”¨æˆ·ç¡®è®¤ï¼š

**ç®€å•åŠŸèƒ½ç‰¹å¾ï¼š**
- å•ä¸€èŒè´£ï¼Œæ”¹åŠ¨èŒƒå›´å°
- æ— éœ€æ–°å¢æ¶æ„æˆ–æ•°æ®æ¨¡å‹
- å®ç°è·¯å¾„æ˜ç¡®ï¼Œæ— é‡å¤§æŠ€æœ¯å†³ç­–

**å¤æ‚åŠŸèƒ½ç‰¹å¾ï¼š**
- æ¶‰åŠå¤šä¸ªæ¨¡å—æˆ–ç³»ç»Ÿ
- éœ€è¦æ–°å¢æ¶æ„ã€æ•°æ®æ¨¡å‹æˆ–æ¥å£
- æœ‰å¤šç§å®ç°æ–¹æ¡ˆéœ€è¦æƒè¡¡

ç¤ºä¾‹æç¤ºï¼š
```
è¿™ä¸ªåŠŸèƒ½çœ‹èµ·æ¥ã€ç®€å•/å¤æ‚ã€‘ï¼Œå› ä¸ºã€åŸå› ã€‘ã€‚
- ç®€å•åŠŸèƒ½ï¼šç›´æ¥å†™ä¸€æ®µè®¾è®¡æ¦‚è¿°
- å¤æ‚åŠŸèƒ½ï¼šé“¾æ¥åˆ°è®¾è®¡æ–‡æ¡£

ä½ è§‰å¾—å‘¢ï¼Ÿ
```

### 4. æ£€æŸ¥è®¾è®¡æ–‡æ¡£

**å¤æ‚åŠŸèƒ½ï¼ˆæœ‰è®¾è®¡æ–‡æ¡£ï¼‰ï¼š**
- è¯¢é—®æ–‡æ¡£è·¯å¾„ï¼ˆå¦‚ `docs/plans/xxx-design.md`ï¼‰
- è‡ªåŠ¨æå–æ¦‚è¿°ï¼ˆè¯»å–æ–‡æ¡£å‰ 200 å­—æˆ– Overview éƒ¨åˆ†ï¼‰
- ç”Ÿæˆæ–‡æ¡£é“¾æ¥

**ç®€å•åŠŸèƒ½ï¼ˆæ— è®¾è®¡æ–‡æ¡£ï¼‰ï¼š**
- è¯¢é—®è®¾è®¡æ¦‚è¿°ï¼ˆ2-3 å¥è¯è¯´æ˜æŠ€æœ¯æ–¹æ¡ˆï¼‰
- æˆ–åŸºäºå¯¹è¯ä¸Šä¸‹æ–‡ç”Ÿæˆæ¦‚è¿°ï¼Œè¯·ç”¨æˆ·ç¡®è®¤

### 5. è´¨é‡æ£€æŸ¥

æ›´æ–°å‰æ£€æŸ¥è®¾è®¡å†…å®¹ï¼š
- æœ‰æ˜ç¡®ç›®æ ‡ï¼Ÿ
- æœ‰æŠ€æœ¯æ–¹æ¡ˆï¼Ÿ
- å¯æ‹†åˆ†ä»»åŠ¡ï¼Ÿ

æœ‰é—®é¢˜åˆ™æç¤ºç”¨æˆ·è¡¥å……ï¼Œä¿®æ”¹åå†ç»§ç»­ã€‚

### 6. ç¡®ä¿æ–‡æ¡£å·²æäº¤ï¼ˆå¦‚æœ‰æ–‡æ¡£ï¼‰

æ£€æŸ¥è®¾è®¡æ–‡æ¡£æ˜¯å¦å·²æäº¤åˆ° gitï¼š
```bash
git ls-files --error-unmatch {doc_path} 2>/dev/null
```

**æœªæäº¤ï¼š**
- æç¤ºï¼š"è®¾è®¡æ–‡æ¡£éœ€è¦å…ˆæäº¤åˆ° gitï¼Œä»¥ä¾¿ç”Ÿæˆæ°¸ä¹…é“¾æ¥"
- å¼•å¯¼æäº¤ï¼š`git add {doc_path} && git commit -m "docs: æ·»åŠ è®¾è®¡æ–‡æ¡£"`
- è·å– commit SHAï¼š`git rev-parse HEAD`

**å·²æäº¤ï¼š**
- ç›´æ¥è·å–åŒ…å«è¯¥æ–‡ä»¶çš„ commit SHA

### 7. æ›´æ–°ç›®æ ‡ Issue

ä½¿ç”¨ `gh issue edit` æ›´æ–° User Story çš„ bodyï¼Œæ·»åŠ  `## Design` éƒ¨åˆ†ï¼š

```bash
# è·å–å½“å‰ issue body
gh issue view {issue_number} --json body -q '.body' > /tmp/issue_body.md

# ç¼–è¾‘æ·»åŠ  Design éƒ¨åˆ†ï¼ˆåœ¨é€‚å½“ä½ç½®æ’å…¥ï¼‰

# æ›´æ–° issue
gh issue edit {issue_number} --body-file /tmp/issue_body.md
```

### 8. å¼•å¯¼ä¸‹ä¸€æ­¥

"å·²ä¸º User Story (#N) / Problem (#N) æ·»åŠ è®¾è®¡å†…å®¹ã€‚æ¥ä¸‹æ¥ï¼š
- ä½¿ç”¨ `issue-workflow-task` åˆ›å»ºå®ç°/ä¿®å¤ä»»åŠ¡
- æˆ–ä½¿ç”¨ `superpowers:writing-plans` ç¼–å†™è¯¦ç»†å®ç°è®¡åˆ’"

## Design å†…å®¹æ ¼å¼

æ ¹æ®å¤æ‚åº¦åˆ¤æ–­ï¼Œç”Ÿæˆä»¥ä¸‹æ ¼å¼ä¹‹ä¸€ï¼š

**ç®€å•åŠŸèƒ½ï¼ˆæ— è®¾è®¡æ–‡æ¡£ï¼‰ï¼š**
```markdown
## Design
> ç®€è¦è®¾è®¡æ¦‚è¿°ï¼Œ2-3 å¥è¯è¯´æ˜æŠ€æœ¯æ–¹æ¡ˆ
```

**å¤æ‚åŠŸèƒ½ï¼ˆæœ‰è®¾è®¡æ–‡æ¡£ï¼‰ï¼š**
```markdown
## Design
> **æ¦‚è¿°**ï¼šç®€è¦è¯´æ˜è®¾è®¡ç›®æ ‡å’Œæ–¹æ¡ˆ
>
> ğŸ“„ [è®¾è®¡æ–‡æ¡£](https://github.com/{owner}/{repo}/blob/{commit_sha}/docs/plans/xxx-design.md)
```

> **æ°¸ä¹…é“¾æ¥**ï¼šä½¿ç”¨ `{commit_sha}` æŒ‡å‘ç‰¹å®šæäº¤ï¼Œç¡®ä¿åˆ†æ”¯åˆ é™¤åé“¾æ¥ä»å¯è®¿é—®ã€‚é€šè¿‡ `git rev-parse HEAD` è·å–å½“å‰ commit SHAã€‚

## Common Mistakes

| é”™è¯¯ | ç¤ºä¾‹ | æ­£ç¡®åšæ³• |
|------|------|----------|
| æ¦‚è¿°å¤ªé•¿ | å¤åˆ¶æ•´ä¸ªè®¾è®¡æ–‡æ¡£ | 2-3 å¥è¯æ¦‚æ‹¬æ ¸å¿ƒæ–¹æ¡ˆ |
| å¤æ‚åŠŸèƒ½æ²¡æœ‰æ–‡æ¡£é“¾æ¥ | åªå†™æ¦‚è¿°ä¸é“¾æ¥ | å¤æ‚åŠŸèƒ½å¿…é¡»é“¾æ¥åˆ°è®¾è®¡æ–‡æ¡£ |
| è·³è¿‡ brainstorming | è¾¹åšè¾¹è®¾è®¡ | å¤æ‚åŠŸèƒ½å…ˆå®Œæˆè®¾è®¡å†æ·»åŠ  |
| è®¾è®¡å¤ªå¤§ | ä¸€ä¸ªè®¾è®¡åŒ…å«å¤šä¸ªåŠŸèƒ½ | ä¸€ä¸ª User Story å¯¹åº”ä¸€ä¸ªè®¾è®¡ |
| å¤æ‚åº¦åˆ¤æ–­é”™è¯¯ | å¤æ‚åŠŸèƒ½å½“ç®€å•å¤„ç† | Claude æ¨æ–­åè¯·ç”¨æˆ·ç¡®è®¤ |

## ç¤ºä¾‹

ç”¨æˆ·å®Œæˆ brainstorming åï¼š"å¸®æˆ‘æ·»åŠ è®¾è®¡"

**å¤æ‚åŠŸèƒ½ï¼ˆæœ‰è®¾è®¡æ–‡æ¡£ï¼‰ï¼š**
```
æ£€æµ‹åˆ°ä½ åˆšå®Œæˆäº†ç™»å½•ç³»ç»Ÿçš„è®¾è®¡ã€‚

è¿™ä¸ªåŠŸèƒ½æ¶‰åŠè®¤è¯ã€token ç®¡ç†ã€å¤šä¸ªæ¥å£ï¼Œçœ‹èµ·æ¥æ˜¯å¤æ‚åŠŸèƒ½ã€‚
å»ºè®®é“¾æ¥åˆ°è®¾è®¡æ–‡æ¡£ã€‚ä½ è§‰å¾—å‘¢ï¼Ÿ

[ç”¨æˆ·ç¡®è®¤]

è®¾è®¡æ–‡æ¡£è·¯å¾„æ˜¯ docs/plans/login-design.mdï¼Œæˆ‘æå–äº†æ¦‚è¿°ï¼š
> åŸºäº JWT çš„è®¤è¯ç³»ç»Ÿï¼Œæ”¯æŒ refresh token è½®æ¢ï¼ŒåŒ…å«ç™»å½•ã€ç™»å‡ºã€token åˆ·æ–°ä¸‰ä¸ªæ¥å£ã€‚

ç¡®è®¤æ›´æ–° User Story #42 å—ï¼Ÿ
```

ç”¨æˆ·ç¡®è®¤å -> è´¨é‡æ£€æŸ¥ -> ç¡®ä¿æ–‡æ¡£å·²æäº¤ -> æ›´æ–° User Story

**ç®€å•åŠŸèƒ½ï¼ˆæ— è®¾è®¡æ–‡æ¡£ï¼‰ï¼š**
```
è¿™ä¸ªåŠŸèƒ½æ˜¯æ·»åŠ ä¸€ä¸ªé…ç½®é¡¹ï¼Œæ”¹åŠ¨èŒƒå›´å°ï¼Œçœ‹èµ·æ¥æ˜¯ç®€å•åŠŸèƒ½ã€‚
ç›´æ¥å†™ä¸€æ®µè®¾è®¡æ¦‚è¿°å°±å¤Ÿäº†ã€‚ä½ è§‰å¾—å‘¢ï¼Ÿ

[ç”¨æˆ·ç¡®è®¤]

è¯·æä¾›è®¾è®¡æ¦‚è¿°ï¼ˆ2-3 å¥è¯è¯´æ˜æŠ€æœ¯æ–¹æ¡ˆï¼‰ï¼Œæˆ–è€…æˆ‘å¯ä»¥æ ¹æ®è®¨è®ºå†…å®¹å¸®ä½ ç”Ÿæˆã€‚
```

ç”¨æˆ·æä¾›æˆ–ç¡®è®¤æ¦‚è¿°å -> è´¨é‡æ£€æŸ¥ -> æ›´æ–° User Story

## ä¸Šä¸‹æ¸¸å…³ç³»

| æ–¹å‘ | æŠ€èƒ½ | è¯´æ˜ |
|------|------|------|
| ä¸Šæ¸¸ | `issue-workflow-user-story` | å…ˆæœ‰ User Story |
| ä¸Šæ¸¸ | `issue-workflow-problem` | æˆ–å…ˆæœ‰ Problem |
| ä¸Šæ¸¸ | `superpowers:brainstorming` | å¤æ‚åŠŸèƒ½å»ºè®®å…ˆå®Œæˆè®¾è®¡ |
| ä¸‹æ¸¸ | `issue-workflow-task` | æ·»åŠ è®¾è®¡åå¼•å¯¼åˆ›å»ºä»»åŠ¡ |
| ä¸‹æ¸¸ | `superpowers:writing-plans` | æˆ–ç¼–å†™è¯¦ç»†å®ç°è®¡åˆ’ |
